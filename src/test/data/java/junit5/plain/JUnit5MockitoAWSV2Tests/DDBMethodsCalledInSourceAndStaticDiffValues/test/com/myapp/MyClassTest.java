package com.myapp;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.Mock;
import software.amazon.awssdk.awscore.exception.AwsServiceException;
import software.amazon.awssdk.core.exception.SdkClientException;
import software.amazon.awssdk.services.dynamodb.DynamoDbClient;
import software.amazon.awssdk.services.dynamodb.model.*;

import java.time.LocalDateTime;
import java.time.ZoneOffset;

import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.mockito.Mockito.when;
import static org.mockito.MockitoAnnotations.initMocks;

class MyClassTest {

    @Mock
    private DynamoDbClient mockDynamoDbClient;

    private MyClass myClassUnderTest;

    @BeforeEach
    void setUp() {
        initMocks(this);
        myClassUnderTest = new MyClass(mockDynamoDbClient);
    }

    @Test
    void testTryCreateTable1() {
        // Setup
        // Configure DynamoDbClient.createTable(...).
        final CreateTableResponse createTableResponse = CreateTableResponse.builder()
                .tableDescription(TableDescription.builder()
                        .attributeDefinitions(AttributeDefinition.builder()
                                .attributeName("attributeName")
                                .attributeType(ScalarAttributeType.S)
                                .build())
                        .tableName("tableName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .tableStatus(TableStatus.CREATING)
                        .creationDateTime(LocalDateTime.of(2020, 1, 1, 0, 0, 0, 0).toInstant(ZoneOffset.UTC))
                        .provisionedThroughput(ProvisionedThroughputDescription.builder()
                                .lastIncreaseDateTime(
                                        LocalDateTime.of(2020, 1, 1, 0, 0, 0, 0).toInstant(ZoneOffset.UTC))
                                .lastDecreaseDateTime(
                                        LocalDateTime.of(2020, 1, 1, 0, 0, 0, 0).toInstant(ZoneOffset.UTC))
                                .numberOfDecreasesToday(0L)
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(0L)
                                .build())
                        .tableSizeBytes(0L)
                        .itemCount(0L)
                        .tableArn("tableArn")
                        .tableId("tableId")
                        .billingModeSummary(BillingModeSummary.builder()
                                .billingMode(BillingMode.PROVISIONED)
                                .lastUpdateToPayPerRequestDateTime(
                                        LocalDateTime.of(2020, 1, 1, 0, 0, 0, 0).toInstant(ZoneOffset.UTC))
                                .build())
                        .localSecondaryIndexes(LocalSecondaryIndexDescription.builder()
                                .indexName("indexName")
                                .keySchema(KeySchemaElement.builder()
                                        .attributeName("attributeName")
                                        .keyType(KeyType.HASH)
                                        .build())
                                .projection(Projection.builder()
                                        .projectionType(ProjectionType.ALL)
                                        .nonKeyAttributes("nonKeyAttributes")
                                        .build())
                                .indexSizeBytes(0L)
                                .itemCount(0L)
                                .indexArn("indexArn")
                                .build())
                        .globalSecondaryIndexes(GlobalSecondaryIndexDescription.builder().build())
                        .build())
                .build();
        when(mockDynamoDbClient.createTable(CreateTableRequest.builder()
                .attributeDefinitions(AttributeDefinition.builder()
                        .attributeName("attributeName")
                        .attributeType(ScalarAttributeType.S)
                        .build())
                .tableName("tableName")
                .keySchema(KeySchemaElement.builder()
                        .attributeName("attributeName")
                        .keyType(KeyType.HASH)
                        .build())
                .localSecondaryIndexes(LocalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .build())
                .globalSecondaryIndexes(GlobalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .provisionedThroughput(ProvisionedThroughput.builder()
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(5L)
                                .build())
                        .build())
                .billingMode(BillingMode.PROVISIONED)
                .provisionedThroughput(ProvisionedThroughput.builder()
                        .readCapacityUnits(0L)
                        .writeCapacityUnits(5L)
                        .build())
                .streamSpecification(StreamSpecification.builder()
                        .streamEnabled(false)
                        .streamViewType(StreamViewType.NEW_IMAGE)
                        .build())
                .sseSpecification(SSESpecification.builder()
                        .enabled(false)
                        .sseType(SSEType.KMS)
                        .kmsMasterKeyId("kmsMasterKeyId")
                        .build())
                .tags(Tag.builder()
                        .key("key")
                        .build())
                .build())).thenReturn(createTableResponse);

        // Run the test
        myClassUnderTest.tryCreateTable1();

        // Verify the results
    }

    @Test
    void testTryCreateTable1_DynamoDbClientThrowsResourceInUseException() {
        // Setup
        when(mockDynamoDbClient.createTable(CreateTableRequest.builder()
                .attributeDefinitions(AttributeDefinition.builder()
                        .attributeName("attributeName")
                        .attributeType(ScalarAttributeType.S)
                        .build())
                .tableName("tableName")
                .keySchema(KeySchemaElement.builder()
                        .attributeName("attributeName")
                        .keyType(KeyType.HASH)
                        .build())
                .localSecondaryIndexes(LocalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .build())
                .globalSecondaryIndexes(GlobalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .provisionedThroughput(ProvisionedThroughput.builder()
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(5L)
                                .build())
                        .build())
                .billingMode(BillingMode.PROVISIONED)
                .provisionedThroughput(ProvisionedThroughput.builder()
                        .readCapacityUnits(0L)
                        .writeCapacityUnits(5L)
                        .build())
                .streamSpecification(StreamSpecification.builder()
                        .streamEnabled(false)
                        .streamViewType(StreamViewType.NEW_IMAGE)
                        .build())
                .sseSpecification(SSESpecification.builder()
                        .enabled(false)
                        .sseType(SSEType.KMS)
                        .kmsMasterKeyId("kmsMasterKeyId")
                        .build())
                .tags(Tag.builder()
                        .key("key")
                        .build())
                .build())).thenThrow(ResourceInUseException.class);

        // Run the test
        assertThrows(ResourceInUseException.class, () -> myClassUnderTest.tryCreateTable1());
    }

    @Test
    void testTryCreateTable1_DynamoDbClientThrowsLimitExceededException() {
        // Setup
        when(mockDynamoDbClient.createTable(CreateTableRequest.builder()
                .attributeDefinitions(AttributeDefinition.builder()
                        .attributeName("attributeName")
                        .attributeType(ScalarAttributeType.S)
                        .build())
                .tableName("tableName")
                .keySchema(KeySchemaElement.builder()
                        .attributeName("attributeName")
                        .keyType(KeyType.HASH)
                        .build())
                .localSecondaryIndexes(LocalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .build())
                .globalSecondaryIndexes(GlobalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .provisionedThroughput(ProvisionedThroughput.builder()
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(5L)
                                .build())
                        .build())
                .billingMode(BillingMode.PROVISIONED)
                .provisionedThroughput(ProvisionedThroughput.builder()
                        .readCapacityUnits(0L)
                        .writeCapacityUnits(5L)
                        .build())
                .streamSpecification(StreamSpecification.builder()
                        .streamEnabled(false)
                        .streamViewType(StreamViewType.NEW_IMAGE)
                        .build())
                .sseSpecification(SSESpecification.builder()
                        .enabled(false)
                        .sseType(SSEType.KMS)
                        .kmsMasterKeyId("kmsMasterKeyId")
                        .build())
                .tags(Tag.builder()
                        .key("key")
                        .build())
                .build())).thenThrow(LimitExceededException.class);

        // Run the test
        assertThrows(LimitExceededException.class, () -> myClassUnderTest.tryCreateTable1());
    }

    @Test
    void testTryCreateTable1_DynamoDbClientThrowsInternalServerErrorException() {
        // Setup
        when(mockDynamoDbClient.createTable(CreateTableRequest.builder()
                .attributeDefinitions(AttributeDefinition.builder()
                        .attributeName("attributeName")
                        .attributeType(ScalarAttributeType.S)
                        .build())
                .tableName("tableName")
                .keySchema(KeySchemaElement.builder()
                        .attributeName("attributeName")
                        .keyType(KeyType.HASH)
                        .build())
                .localSecondaryIndexes(LocalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .build())
                .globalSecondaryIndexes(GlobalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .provisionedThroughput(ProvisionedThroughput.builder()
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(5L)
                                .build())
                        .build())
                .billingMode(BillingMode.PROVISIONED)
                .provisionedThroughput(ProvisionedThroughput.builder()
                        .readCapacityUnits(0L)
                        .writeCapacityUnits(5L)
                        .build())
                .streamSpecification(StreamSpecification.builder()
                        .streamEnabled(false)
                        .streamViewType(StreamViewType.NEW_IMAGE)
                        .build())
                .sseSpecification(SSESpecification.builder()
                        .enabled(false)
                        .sseType(SSEType.KMS)
                        .kmsMasterKeyId("kmsMasterKeyId")
                        .build())
                .tags(Tag.builder()
                        .key("key")
                        .build())
                .build())).thenThrow(InternalServerErrorException.class);

        // Run the test
        assertThrows(InternalServerErrorException.class, () -> myClassUnderTest.tryCreateTable1());
    }

    @Test
    void testTryCreateTable1_DynamoDbClientThrowsAwsServiceException() {
        // Setup
        when(mockDynamoDbClient.createTable(CreateTableRequest.builder()
                .attributeDefinitions(AttributeDefinition.builder()
                        .attributeName("attributeName")
                        .attributeType(ScalarAttributeType.S)
                        .build())
                .tableName("tableName")
                .keySchema(KeySchemaElement.builder()
                        .attributeName("attributeName")
                        .keyType(KeyType.HASH)
                        .build())
                .localSecondaryIndexes(LocalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .build())
                .globalSecondaryIndexes(GlobalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .provisionedThroughput(ProvisionedThroughput.builder()
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(5L)
                                .build())
                        .build())
                .billingMode(BillingMode.PROVISIONED)
                .provisionedThroughput(ProvisionedThroughput.builder()
                        .readCapacityUnits(0L)
                        .writeCapacityUnits(5L)
                        .build())
                .streamSpecification(StreamSpecification.builder()
                        .streamEnabled(false)
                        .streamViewType(StreamViewType.NEW_IMAGE)
                        .build())
                .sseSpecification(SSESpecification.builder()
                        .enabled(false)
                        .sseType(SSEType.KMS)
                        .kmsMasterKeyId("kmsMasterKeyId")
                        .build())
                .tags(Tag.builder()
                        .key("key")
                        .build())
                .build())).thenThrow(AwsServiceException.class);

        // Run the test
        assertThrows(AwsServiceException.class, () -> myClassUnderTest.tryCreateTable1());
    }

    @Test
    void testTryCreateTable1_DynamoDbClientThrowsSdkClientException() {
        // Setup
        when(mockDynamoDbClient.createTable(CreateTableRequest.builder()
                .attributeDefinitions(AttributeDefinition.builder()
                        .attributeName("attributeName")
                        .attributeType(ScalarAttributeType.S)
                        .build())
                .tableName("tableName")
                .keySchema(KeySchemaElement.builder()
                        .attributeName("attributeName")
                        .keyType(KeyType.HASH)
                        .build())
                .localSecondaryIndexes(LocalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .build())
                .globalSecondaryIndexes(GlobalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .provisionedThroughput(ProvisionedThroughput.builder()
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(5L)
                                .build())
                        .build())
                .billingMode(BillingMode.PROVISIONED)
                .provisionedThroughput(ProvisionedThroughput.builder()
                        .readCapacityUnits(0L)
                        .writeCapacityUnits(5L)
                        .build())
                .streamSpecification(StreamSpecification.builder()
                        .streamEnabled(false)
                        .streamViewType(StreamViewType.NEW_IMAGE)
                        .build())
                .sseSpecification(SSESpecification.builder()
                        .enabled(false)
                        .sseType(SSEType.KMS)
                        .kmsMasterKeyId("kmsMasterKeyId")
                        .build())
                .tags(Tag.builder()
                        .key("key")
                        .build())
                .build())).thenThrow(SdkClientException.class);

        // Run the test
        assertThrows(SdkClientException.class, () -> myClassUnderTest.tryCreateTable1());
    }

    @Test
    void testTryCreateTable1_DynamoDbClientThrowsDynamoDbException() {
        // Setup
        when(mockDynamoDbClient.createTable(CreateTableRequest.builder()
                .attributeDefinitions(AttributeDefinition.builder()
                        .attributeName("attributeName")
                        .attributeType(ScalarAttributeType.S)
                        .build())
                .tableName("tableName")
                .keySchema(KeySchemaElement.builder()
                        .attributeName("attributeName")
                        .keyType(KeyType.HASH)
                        .build())
                .localSecondaryIndexes(LocalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .build())
                .globalSecondaryIndexes(GlobalSecondaryIndex.builder()
                        .indexName("indexName")
                        .keySchema(KeySchemaElement.builder()
                                .attributeName("attributeName")
                                .keyType(KeyType.HASH)
                                .build())
                        .projection(Projection.builder()
                                .projectionType(ProjectionType.ALL)
                                .nonKeyAttributes("nonKeyAttributes")
                                .build())
                        .provisionedThroughput(ProvisionedThroughput.builder()
                                .readCapacityUnits(0L)
                                .writeCapacityUnits(5L)
                                .build())
                        .build())
                .billingMode(BillingMode.PROVISIONED)
                .provisionedThroughput(ProvisionedThroughput.builder()
                        .readCapacityUnits(0L)
                        .writeCapacityUnits(5L)
                        .build())
                .streamSpecification(StreamSpecification.builder()
                        .streamEnabled(false)
                        .streamViewType(StreamViewType.NEW_IMAGE)
                        .build())
                .sseSpecification(SSESpecification.builder()
                        .enabled(false)
                        .sseType(SSEType.KMS)
                        .kmsMasterKeyId("kmsMasterKeyId")
                        .build())
                .tags(Tag.builder()
                        .key("key")
                        .build())
                .build())).thenThrow(DynamoDbException.class);

        // Run the test
        assertThrows(DynamoDbException.class, () -> myClassUnderTest.tryCreateTable1());
    }
}
